# YaShlang
Online PeerTube and YouTube player for Android with local playlists and whitelisted recommendations  
–Ω–∞ —Ä—É—Å—Å–∫–æ–º: [README.md](README.md)

<a href="https://f-droid.org/packages/su.sadrobot.yashlang/"><img src="https://f-droid.org/wiki/images/0/06/F-Droid-button_get-it-on.png"></a>

- Add fave channels and playlists
- Switch off videos inside added playlists if you don't like them
- Watch videos you only want to

Make your own safe and fully controlled online theater.

(available interface languages: English, Russian)

### On the main screen and on the player screen: random recommendations from chosen channels

[<img src="doc/screens/v0.1.x/glagna-1.png" width=600>](doc/screens/v0.1.x/glagna-1.png)

[<img src="doc/screens/v0.1.x/glagna-2.png" width=600>](doc/screens/v0.1.x/glagna-2.png)

[<img src="doc/screens/v0.1.x/glagna-4.png" width=600>](doc/screens/v0.1.x/glagna-4.png)

[<img src="doc/screens/v0.1.x/search-nu-pogodi-2.png" width=600>](doc/screens/v0.1.x/search-nu-pogodi-2.png)

[<img src="doc/screens/v0.1.x/player-7.png" width=600>](doc/screens/v0.1.x/player-7.png)

[<img src="doc/screens/v0.1.x/player-8.png" width=600>](doc/screens/v0.1.x/player-8.png)


### Instant search in local database

[<img src="doc/screens/v0.1.x/search-nu-pogodi-1.png" width=200>](doc/screens/v0.1.x/search-nu-pogodi-1.png) =>
[<img src="doc/screens/v0.1.x/search-nu-pogodi-3.png" width=600>](doc/screens/v0.1.x/search-nu-pogodi-3.png)


### Add new channel or playlist

[<img src="doc/screens/v0.1.x/add-playlist-1.png" width=200>](doc/screens/v0.1.x/add-playlist-1.png)
[<img src="doc/screens/v0.1.x/add-playlist-2.png" width=200>](doc/screens/v0.1.x/add-playlist-2.png)
[<img src="doc/screens/v0.1.x/add-playlist-3.png" width=200>](doc/screens/v0.1.x/add-playlist-3.png)
[<img src="doc/screens/v0.1.x/add-playlist-4.png" width=200>](doc/screens/v0.1.x/add-playlist-4.png)

[<img src="doc/screens/v0.1.x/add-playlist-6.png" width=200>](doc/screens/v0.1.x/add-playlist-6.png)
[<img src="doc/screens/v0.1.x/add-playlist-7.png" width=200>](doc/screens/v0.1.x/add-playlist-7.png)
[<img src="doc/screens/v0.1.x/add-playlist-8.png" width=200>](doc/screens/v0.1.x/add-playlist-8.png)
[<img src="doc/screens/v0.1.x/add-playlist-9.png" width=200>](doc/screens/v0.1.x/add-playlist-9.png)

Search online by name or insert known address.

You can insert known address of PeerTube or YouTube channel, user or playlist. Online search by name works only for YouTube channels and playlists.

### Dynamic playlist ‚Äî play search results

[<img src="doc/screens/v0.1.x/search-and-play-all-1.png" width=200>](doc/screens/v0.1.x/search-and-play-all-1.png)
[<img src="doc/screens/v0.1.x/search-and-play-all-2.png" width=200>](doc/screens/v0.1.x/search-and-play-all-2.png) =>
[<img src="doc/screens/v0.1.x/search-and-play-all-3.png" width=200>](doc/screens/v0.1.x/search-and-play-all-3.png)

[<img src="doc/screens/v0.1.x/search-and-play-all-4.png" width=600>](doc/screens/v0.1.x/search-and-play-all-4.png)

[<img src="doc/screens/v0.1.x/search-and-play-all-5.png" width=600>](doc/screens/v0.1.x/search-and-play-all-5.png)

Only search results would be shown under video in recommendations.

In the same way, if you open video from playlist settings screen, recommendations list would show only videos from same playlist.

### Playlists and channels can be temporarily switched off and on

[<img src="doc/screens/v0.1.x/playlist-on-off-1.png" width=200>](doc/screens/v0.1.x/playlist-on-off-1.png)
[<img src="doc/screens/v0.1.x/playlist-on-off-2.png" width=200>](doc/screens/v0.1.x/playlist-on-off-2.png)
[<img src="doc/screens/v0.1.x/playlist-on-off-3.png" width=200>](doc/screens/v0.1.x/playlist-on-off-3.png)
[<img src="doc/screens/v0.1.x/playlist-on-off-4.png" width=200>](doc/screens/v0.1.x/playlist-on-off-4.png)

_Please note: videos from disabled playlist would also disappear from search results, view history and from the list of faves. But don't you worry about that, they would come back at the same place just after playlist would be back enabled._


### Blacklist video

[<img src="doc/screens/v0.1.x/blacklist-2.png" width=200>](doc/screens/v0.1.x/blacklist-2.png)
[<img src="doc/screens/v0.1.x/blacklist-3.png" width=200>](doc/screens/v0.1.x/blacklist-3.png)
[<img src="doc/screens/v0.1.x/blacklist-4.png" width=200>](doc/screens/v0.1.x/blacklist-4.png)

Blacklisted video would not be shown in recommendations, search results, history and list of faves. It would still be visible in playlist setting activity.

See blacklist and enable blocked videos again:  
_Settings > menu in title > Blacklist_

[<img src="doc/screens/v0.1.x/blacklist-5.png" width=200>](doc/screens/v0.1.x/blacklist-5.png)
[<img src="doc/screens/v0.1.x/blacklist-6.png" width=200>](doc/screens/v0.1.x/blacklist-6.png)


### Starred videos (faves) and watch history

[<img src="doc/screens/v0.1.x/player-2.png" width=200>](doc/screens/v0.1.x/player-2.png)
[<img src="doc/screens/v0.1.x/starred-1.png" width=200>](doc/screens/v0.1.x/starred-1.png)
[<img src="doc/screens/v0.1.x/history-1.png" width=200>](doc/screens/v0.1.x/history-1.png)

Starred videos (faves) are starred (marked as fave) in the top right corner in the player activity.

### Context menus in activity titles and on long click in lists and galleries

[<img src="doc/screens/v0.1.x/context-menu-1.png" width=200>](doc/screens/v0.1.x/context-menu-1.png)
[<img src="doc/screens/v0.1.x/context-menu-2.png" width=200>](doc/screens/v0.1.x/context-menu-2.png)
[<img src="doc/screens/v0.1.x/context-menu-3.png" width=200>](doc/screens/v0.1.x/context-menu-3.png)
[<img src="doc/screens/v0.1.x/context-menu-5.png" width=200>](doc/screens/v0.1.x/context-menu-5.png)

## Quick start ‚Äî add recommended channels and playlists

[<img src="doc/screens/v0.1.x/glagna-empty.png" width=200>](doc/screens/v0.1.x/glagna-empty.png)
[<img src="doc/screens/v0.1.x/add-recommended-1.png" width=200>](doc/screens/v0.1.x/add-recommended-1.png) =>
[<img src="doc/screens/v0.1.x/blacklist-1.png" width=200>](doc/screens/v0.1.x/blacklist-1.png)

The app would immediately start looking like the one on the above screens.

You can switch off or delete unwanted playlists and channels in the settings.

## In addition

- Browse enabled playlists from main screen
- Playlist profiles: combine playlists in groups and switch groups depending on watch context: Cartoons, Films, Edutainment, History, Analytics etc.
- Various features not listed here by some reason

## Install

- F-Droid: https://f-droid.org/packages/su.sadrobot.yashlang/
- Build from sources: https://github.com/sadr0b0t/yashlang/
- Download apk from releases: https://github.com/sadr0b0t/yashlang/releases
- AppGallery Huawei (apk from github releases): https://appstore.huawei.com/app/C101887905
- Application is not listed in Google Play and won't appear there at the nearest time (Google would ban apps who parse their services sites)

Please note, that you will not be able to switch between Github release / F-Droid app versions without removing the app (and losing data: e.g. - added playlists, stars, watch history) and reinstalling it due to different apk signatures.

## Technical info

Does not require Google/YouTube account, you will need only interner.

Used libraries:

- [NewPipeExtractor](https://github.com/TeamNewPipe/NewPipeExtractor/) to get info from PeerTube and YouTube
- [ExoPlayer](https://exoplayer.dev/) to play videos.

Opensource (libresource) under GPLv3 license.

## Known problems

- Google breaks compatibility for external players quite often. YouTube videos can stop loading at any moment. Usually those problems are fixed by NewPipeExtractor (and youtube-dl) project team quite quickly, actual info can be usually found in [NewPipeExtractor/issues](https://github.com/TeamNewPipe/NewPipeExtractor/issues) bugtracker. You will have to wait several days for fixed app update release anyway (F-Droid users especially).

_tip: Find [appropriate PeerTube server](https://joinpeertube.org/) with upload enabled (or create your own instance), import your fave videos from YouTube and add PeerTube channel to YaShalang playlists!_

- Won't play YouTube videos with age restrictions, which require Google/YouTube login

for example: [–ò–ª—å—è –ú—É—Ä–æ–º–µ—Ü, –ö–∏–Ω–æ–∫–æ–Ω—Ü–µ—Ä–Ω "–ú–æ—Å—Ñ–∏–ª—å–º"](https://www.youtube.com/watch?v=hooaKxdXbfM), [–†—É—Å–ª–∞–Ω –∏ –õ—é–¥–º–∏–ª–∞ 1-–∞—è —Å–µ—Ä–∏—è / Ruslan and Lyudmila film 1, –ö–∏–Ω–æ–∫–æ–Ω—Ü–µ—Ä–Ω "–ú–æ—Å—Ñ–∏–ª—å–º"](https://www.youtube.com/watch?v=2UoO2t536Ko)

_tip: add such videos to blacklist or ask their authors to reset the restiction if it was set by mistake._

- Won't play some translations with zero duration returned by service (such videos would be marked as "[dur undef]" in place of duration in lists and galleries)

for example: [–ù—É –ü–æ–≥–æ–¥–∏! –í—Å–µ –í—ã–ø—É—Å–∫–∏ üê∞üê∫ –°–æ—é–∑–º—É–ª—å—Ç—Ñ–∏–ª—å–º HD (–ú—É–ª—å—Ç–∏–∫–∏ –¥–ª—è –¥–µ—Ç–µ–π),  –ú—É–ª—å—Ç–∏–∫–∏ —Å—Ç—É–¥–∏–∏ –°–æ—é–∑–º—É–ª—å—Ç—Ñ–∏–ª—å–º](https://www.youtube.com/watch?v=fwzpCVt2ExY), [–¢–æ–ø –º—É–ª—å—Ç–∏–∫–æ–≤ –°–æ—é–∑–º—É–ª—å—Ç—Ñ–∏–ª—å–º,  –ú—É–ª—å—Ç–∏–∫–∏ —Å—Ç—É–¥–∏–∏ –°–æ—é–∑–º—É–ª—å—Ç—Ñ–∏–ª—å–º](https://www.youtube.com/watch?v=XK1_9fw5CwA)

_tip: to add such videos to blacklist._

- Videos, only available by direct link, may not come to local playlist copy, even if you load all videos from some particular user

for example: [–£–∫—Ä–æ—â–µ–Ω–∏–µ –æ–≥–Ω—è 1 —Å–µ—Ä–∏—è, –ö–∏–Ω–æ–∫–æ–Ω—Ü–µ—Ä–Ω "–ú–æ—Å—Ñ–∏–ª—å–º"](https://www.youtube.com/watch?v=vwBKEKqLOLY)

- If you still meet some public video which does not requre loging, plays in browser, but does not play in app, please post a bug report (probably the bug is already fixed in _NewPipeExtractor_, [for example](https://github.com/sadr0b0t/yashlang/issues/1)).

- Interface might be glitchy while loading galleries and lists with slow (but available) internet

updt: should be better after this https://github.com/sadr0b0t/yashlang/issues/17

- If you catch NullPointerException while opening video or adding playlist, please copy stack trace and create bug report, then try same operation again, most likely it would finish successfully.

- "reCaptcha Challendge requested" error while adding new playlists

Google does not like big number of queries from same address, so it enables captcha for loading pages. You can try to switch to another network (for example, switch off wifi and switch to mobile inet) or wait for the end of current hour (or wait for the whole hour) when Google would disable ban for punished address.

- DO NOT DOWNGRADE to 0.1.0 (or lower) after upgrading to 0.20 (or higher): you would loose all app data - added playlists, view history, stars etc.

This is fixed starting from 0.2.0 (you can safely downgrade to 0.2.0 in future, but not to 0.1.0!). Version 0.1.0 is broked anyway, so there is no reasonable need to downgrade.

## Someday in the future

- Download videos to watch offline
- Export and import database for backup and device migration
- Audio-player mode: play sound track in background when the screen is switched off or the app is not in foucus
- Local playlists with manual video adding
- Other streaming services

